<template>
    <lightning-card class="custom-card">
        <p class="helper-text">
            Having an issue? We're here to help! Just fill out the form below and our team will get back to you as soon as possible.
        </p>    

        <div class="form-container">
            <!-- Request Type Selection -->
            <lightning-combobox
                name="requestType"
                label="Select Request Type"
                value={selectedType}
                options={options}
                onchange={handleTypeChange}
                class="form-field full-width">
            </lightning-combobox>

            <!-- Conditional Form Sections -->
            <div class="form-sections">
                <!-- Complaint Form -->
                <template if:true={isComplaintSelected}>
                    <div class="section">
                        <lightning-input 
                            label="Name" 
                            value={name} 
                            onchange={handleInputChange} 
                            data-id="name"
                            class="form-field">
                        </lightning-input>
                    </div>

                    <div class="section">
                        <lightning-combobox
                            label="Category"
                            value={category}
                            options={categoryOptions}
                            onchange={handleInputChange}
                            data-id="category"
                            class="form-field">
                        </lightning-combobox>
                    </div>

                    <!-- Show this combo box if category is 'Product Issue' -->
                    <template if:true={isProductIssue}>
                        <div class="section">
                            <lightning-combobox
                                label="Product"
                                value={selectedProduct}
                                options={productOptions}
                                onchange={handleInputChange}
                                data-id="selectedProduct"
                                class="form-field">
                            </lightning-combobox>
                        </div>
                    </template>

                    <div class="section">
                        <lightning-textarea
                            label="Description"
                            data-id="description"     
                            value={description}
                            onchange={handleInputChange}
                            class="form-field large-textarea">
                        </lightning-textarea>
                    </div>

                    <div class="section submit-button">
                        <lightning-button
                            variant="brand"
                            label="Submit Complaint"
                            onclick={handleSubmitComplaint}>
                        </lightning-button>
                    </div>
                </template>

                <!-- Reimbursement Form -->
                <template if:true={isReimbursementSelected}>
                    <div class="section">
                        <lightning-input 
                            label="Title" 
                            value={title} 
                            onchange={handleInputChange} 
                            data-id="title"
                            class="form-field">
                        </lightning-input>
                    </div>

                    <div class="section">
                        <lightning-combobox
                            label="Product"
                            value={selectedProduct}
                            options={productOptions}
                            onchange={handleInputChange}
                            data-id="selectedProduct"
                            class="form-field">
                        </lightning-combobox>
                    </div>

                    <div class="section">
                        <lightning-input 
                            type="number" 
                            label="Amount Requested" 
                            value={amountRequested} 
                            onchange={handleInputChange} 
                            data-id="amountRequested"
                            class="form-field">
                        </lightning-input>
                    </div>

                    <div class="section">
                        <lightning-textarea 
                            label="Description" 
                            value={description} 
                            onchange={handleInputChange} 
                            data-id="description"
                            class="form-field large-textarea"
                            placeholder="Describe precisely your problem and why you need a reimbursement">
                        </lightning-textarea>
                    </div>

                    <div class="section">
                        <lightning-combobox
                            label="Reimbursement Method"
                            value={paymentMethod}
                            options={paymentMethodOptions}
                            onchange={handleInputChange}
                            data-id="paymentMethod"
                            class="form-field">
                        </lightning-combobox>
                    </div>

                    <div class="section">
                        <lightning-input
                            type="checkbox"
                            label="Receipt Attached"
                            checked={receiptAttached}
                            onchange={handleInputChange}
                            data-id="receiptAttached"
                            class="form-field">
                        </lightning-input>
                    </div>
                    

                    <div class="section submit-button">
                        <lightning-button 
                            label="Submit Reimbursement" 
                            variant="brand" 
                            onclick={handleSubmitReimbursement}>
                        </lightning-button>
                    </div>
                </template>
            </div>
        </div>
    </lightning-card>
</template>
